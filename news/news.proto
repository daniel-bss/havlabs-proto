syntax = "proto3";

package pb;

import "google/protobuf/timestamp.proto";
import "buf/validate/validate.proto";

option go_package = "github.com/daniel-bss/havlabs-proto/news/pb";

enum SortField {
    PUBLISHED_AT = 0;
    TITLE = 1;
}

// REQUESTS

message ListNewsRequest {
    uint32 limit = 1 [ (buf.validate.field).uint32.gte = 1 ];
    uint32 offset = 2 [ (buf.validate.field).uint32.gte = 0 ]; 

    // optionals

    // time
    google.protobuf.Timestamp start_time = 3; 
    google.protobuf.Timestamp end_time = 4; 

    // filter
    string including = 5;

    // sorting
    SortField sort_by = 6;
    bool ascending = 7;
}

message GetOneNewsByIdRequest {
    string id = 1 [ (buf.validate.field).string.min_len = 1 ];
}

message CreateNewsRequest {
    string title = 1 [ (buf.validate.field).string.min_len = 1 ];
    string content = 2 [ (buf.validate.field).string.min_len = 1 ];
    string media_id = 3 [ (buf.validate.field).string.min_len = 1 ];
}

message UpdateNewsByIdRequest {
    string title = 1 [ (buf.validate.field).string.min_len = 1 ];
    string content = 2 [ (buf.validate.field).string.min_len = 1 ];
}

// RESPONSES

message OneNewsResponse {
    string title = 1;
    string content = 2;
    string image_url = 3;
    google.protobuf.Timestamp published_at = 4;
}

message ListNewsResponse {
    repeated OneNewsResponse news = 1;
}

message NewsIdResponse {
    string id = 1;
}
