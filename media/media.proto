syntax = "proto3";

package pb;

import "buf/validate/validate.proto";

option go_package = "github.com/daniel-bss/havlabs-proto/media/pb";

// CreateUploadSession

message CreateUploadSessionRequest {
    string purpose = 1 [ (buf.validate.field).string.min_len = 1 ];
    string content_type = 2 [ (buf.validate.field).string.min_len = 1 ];
    string file_name = 3 [ (buf.validate.field).string.min_len = 1 ];
}

message CreateUploadSessionResponse {
    string media_id = 1;
    string upload_url = 2;
}

// ConfirmUpload

enum StatusEnum {
    ready = 0;
    failed = 1;
}

message ConfirmUploadRequest {
    string media_id = 1 [ (buf.validate.field).string.min_len = 1 ];
}

message ConfirmUploadResponse {
    string media_id = 1;
    StatusEnum status = 2 [ (buf.validate.field).enum.defined_only = true ];
}

// Get Media

message GetOneMediaByIdRequest {
    string id = 1;
}

message OneMediaResponse {
    string id = 1;
}

message OneMediaURLResponse {
    string url = 1;
}